{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/kimdawoon/jogakbo-nextjs/jogakbo-nextjs/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kimdawoon/jogakbo-nextjs/jogakbo-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/kimdawoon/jogakbo-nextjs/jogakbo-nextjs/src/components/OAuth/Google.js\",\n    _s = $RefreshSig$();\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGoogle } from \"@fortawesome/free-brands-svg-icons\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\n\nfunction Google() {\n  _s();\n\n  var _useState = useState(null),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var oAuthURL = \"https://accounts.google.com/o/oauth2/v2/auth?client_id=991698652827-vu3q9s8470ko9tu9sl342j69rn7ckpl9.apps.googleusercontent.com&\\nresponse_type=token&\\nredirect_uri=http://localhost:3003&\\nscope=https://www.googleapis.com/auth/userinfo.email\";\n\n  var oAuthHandler = function oAuthHandler() {\n    window.location.assign(oAuthURL);\n  };\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var url, hash, accessToken;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            url = new URL(window.location.href);\n            hash = url.hash;\n\n            if (!hash) {\n              _context.next = 6;\n              break;\n            }\n\n            accessToken = hash.split(\"=\")[1].split(\"&\")[0];\n            _context.next = 6;\n            return axios.get(\"https://www.googleapis.com/oauth2/v2/userinfo?access_token=\" + accessToken, {\n              headers: {\n                authorization: \"token \".concat(accessToken),\n                accept: \"application/json\"\n              }\n            }).then(function (data) {\n              console.log(data);\n              setData(data);\n            })[\"catch\"](function (e) {\n              return console.log(\"oAuth token expired\");\n            });\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    id: \"oAuthBtn\",\n    onClick: oAuthHandler,\n    bgColor: \"#f8f8f8\",\n    src: \"/google.svg\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Google, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n\n_c = Google;\nexport default Google;\n\nvar _c;\n\n$RefreshReg$(_c, \"Google\");","map":{"version":3,"sources":["/Users/kimdawoon/jogakbo-nextjs/jogakbo-nextjs/src/components/OAuth/Google.js"],"names":["FontAwesomeIcon","faGoogle","useState","useEffect","axios","styled","Google","data","setData","oAuthURL","oAuthHandler","window","location","assign","url","URL","href","hash","accessToken","split","get","headers","authorization","accept","then","console","log","e"],"mappings":";;;;;;;AAAA,SAASA,eAAT,QAAgC,gCAAhC;AACA,SAASC,QAAT,QAAyB,oCAAzB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;;AAEA,SAASC,MAAT,GAAkB;AAAA;;AAAA,kBACQJ,QAAQ,CAAC,IAAD,CADhB;AAAA,MACTK,IADS;AAAA,MACHC,OADG;;AAEhB,MAAMC,QAAQ,sPAAd;;AAIA,MAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzBC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBJ,QAAvB;AACD,GAFD;;AAIAN,EAAAA,SAAS,wEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AACFW,YAAAA,GADE,GACI,IAAIC,GAAJ,CAAQJ,MAAM,CAACC,QAAP,CAAgBI,IAAxB,CADJ;AAGFC,YAAAA,IAHE,GAGKH,GAAG,CAACG,IAHT;;AAAA,iBAIJA,IAJI;AAAA;AAAA;AAAA;;AAKAC,YAAAA,WALA,GAKcD,IAAI,CAACE,KAAL,CAAW,GAAX,EAAgB,CAAhB,EAAmBA,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CALd;AAAA;AAAA,mBAMAf,KAAK,CACRgB,GADG,CAEF,gEACEF,WAHA,EAIF;AACEG,cAAAA,OAAO,EAAE;AACPC,gBAAAA,aAAa,kBAAWJ,WAAX,CADN;AAEPK,gBAAAA,MAAM,EAAE;AAFD;AADX,aAJE,EAWHC,IAXG,CAWE,UAACjB,IAAD,EAAU;AACdkB,cAAAA,OAAO,CAACC,GAAR,CAAYnB,IAAZ;AACAC,cAAAA,OAAO,CAACD,IAAD,CAAP;AACD,aAdG,WAeG,UAACoB,CAAD;AAAA,qBAAOF,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAP;AAAA,aAfH,CANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD,IAuBN,EAvBM,CAAT;AAyBA,sBACE;AACE,IAAA,EAAE,EAAC,UADL;AAEE,IAAA,OAAO,EAAEhB,YAFX;AAGE,IAAA,OAAO,EAAC,SAHV;AAIE,IAAA,GAAG,EAAC;AAJN;AAAA;AAAA;AAAA;AAAA,UADF;AAQD;;GA3CQJ,M;;KAAAA,M;AA6CT,eAAeA,MAAf","sourcesContent":["import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGoogle } from \"@fortawesome/free-brands-svg-icons\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\n\nfunction Google() {\n  const [data, setData] = useState(null);\n  const oAuthURL = `https://accounts.google.com/o/oauth2/v2/auth?client_id=991698652827-vu3q9s8470ko9tu9sl342j69rn7ckpl9.apps.googleusercontent.com&\nresponse_type=token&\nredirect_uri=http://localhost:3003&\nscope=https://www.googleapis.com/auth/userinfo.email`;\n  const oAuthHandler = () => {\n    window.location.assign(oAuthURL);\n  };\n\n  useEffect(async () => {\n    const url = new URL(window.location.href);\n\n    const hash = url.hash;\n    if (hash) {\n      const accessToken = hash.split(\"=\")[1].split(\"&\")[0];\n      await axios\n        .get(\n          \"https://www.googleapis.com/oauth2/v2/userinfo?access_token=\" +\n            accessToken,\n          {\n            headers: {\n              authorization: `token ${accessToken}`,\n              accept: \"application/json\",\n            },\n          }\n        )\n        .then((data) => {\n          console.log(data);\n          setData(data);\n        })\n        .catch((e) => console.log(\"oAuth token expired\"));\n    }\n  }, []);\n\n  return (\n    <img\n      id=\"oAuthBtn\"\n      onClick={oAuthHandler}\n      bgColor=\"#f8f8f8\"\n      src=\"/google.svg\"\n    />\n  );\n}\n\nexport default Google;\n"]},"metadata":{},"sourceType":"module"}