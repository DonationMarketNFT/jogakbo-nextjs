{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { media } from \"../../../styles/theme\";\nimport Seo from \"../../components/Seo\";\nimport Category from \"../../components/Category\";\nimport { donateTocampaign, refund } from \"api/UseKlip\";\nimport { useRecoilState } from \"recoil\";\nimport { myAddressState, qrValueState, showConnectWalletModalState } from \"../../../atom\";\nimport ConnectWalletModal from \"components/modals/ConnectWalletModal\";\nconst 이미지 = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__\",\n  componentId: \"sc-1omqhb4-0\"\n})([\"background-image:url(/\\uBA78\\uC885\\uC704\\uAE30.jpg);width:100%;height:500px;\"]);\nconst Wrapper = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__Wrapper\",\n  componentId: \"sc-1omqhb4-1\"\n})([\"background:\", \";box-sizing:border-box;padding-bottom:50px;\"], props => props.theme.bgColor);\nconst Container = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__Container\",\n  componentId: \"sc-1omqhb4-2\"\n})([\"display:flex;flex-direction:column;align-items:center;width:1100px;margin:50px auto;\", \"{margin-right:40px;margin-left:40px;width:auto;}\", \"{margin-right:20px;margin-left:20px;}\"], media.tablet, media.mobile);\nconst 타이틀 = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__\",\n  componentId: \"sc-1omqhb4-3\"\n})([\"display:flex;align-items:center;color:\", \";\"], props => props.theme.textColor);\nconst 캠페인이름 = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__\",\n  componentId: \"sc-1omqhb4-4\"\n})([\"margin:20px 0;font-size:38px;\"]);\nconst Bars = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__Bars\",\n  componentId: \"sc-1omqhb4-5\"\n})([\"position:relative;width:100%;height:30px;box-sizing:border-box;margin-bottom:100px;color:\", \";\"], props => props.theme.textColor);\nconst PercentBar = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__PercentBar\",\n  componentId: \"sc-1omqhb4-6\"\n})([\"width:100%;height:10px;background:lightgray;border-radius:5px;\"]);\nconst CurrentBar = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__CurrentBar\",\n  componentId: \"sc-1omqhb4-7\"\n})([\"position:absolute;top:0;width:\", \";height:10px;background:gray;border-radius:5px;\"], props => props.width);\nconst Percent = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__Percent\",\n  componentId: \"sc-1omqhb4-8\"\n})([\"margin-top:20px;text-align:right;\"]);\nconst Klay = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__Klay\",\n  componentId: \"sc-1omqhb4-9\"\n})([\"margin-top:10px;text-align:right;\"]);\nconst Min = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__Min\",\n  componentId: \"sc-1omqhb4-10\"\n})([\"margin-top:10px;text-align:right;color:\", \";\"], props => props.theme.gray.gray6);\nconst RefundState = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__RefundState\",\n  componentId: \"sc-1omqhb4-11\"\n})([\"color:\", \";\"], props => props.theme.textColor);\nconst RefundButton = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__RefundButton\",\n  componentId: \"sc-1omqhb4-12\"\n})([\"background:red;color:white;margin-bottom:10px;padding:5px 10px;cursor:pointer;\"]);\nconst CampaignBox = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__CampaignBox\",\n  componentId: \"sc-1omqhb4-13\"\n})([\"display:flex;width:100%;margin:0 auto;padding:0 30px;border:1px solid lightgray;border-radius:10px;color:\", \";\", \"{margin:0 30px;padding:0 30px;margin-bottom:30px;}\", \"{padding:0 10px;}\"], props => props.theme.textColor, media.tablet, media.mobile);\nconst CampaignRow = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__CampaignRow\",\n  componentId: \"sc-1omqhb4-14\"\n})([\"display:flex;flex-direction:column;&:first-child{width:70%;}&:last-child{width:30%;}\", \"{&:first-child{width:100%;}&:last-child{width:100%;position:fixed;bottom:0;}}\"], media.mobile);\nconst ParticipantBox = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__ParticipantBox\",\n  componentId: \"sc-1omqhb4-15\"\n})([\"display:flex;flex-direction:column;padding:50px 30px;\", \"{padding:20px 10px;}\"], media.mobile);\nconst ParticipantRow = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__ParticipantRow\",\n  componentId: \"sc-1omqhb4-16\"\n})([\"display:flex;\"]);\nconst ParticipantTitle = /*#__PURE__*/styled.h3.withConfig({\n  displayName: \"params__ParticipantTitle\",\n  componentId: \"sc-1omqhb4-17\"\n})([\"margin:10px 0;\"]);\nconst Participant = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__Participant\",\n  componentId: \"sc-1omqhb4-18\"\n})([\"margin-right:10px;width:70px;height:70px;background:\", \";border-radius:50%;\", \"{width:50px;height:50px;}\"], props => props.theme.textColor, media.tablet);\nconst DescriptionBox = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__DescriptionBox\",\n  componentId: \"sc-1omqhb4-19\"\n})([\"padding:50px 30px;height:90vh;\", \"{padding:20px 10px;}\"], media.mobile);\nconst DescriptionTitle = /*#__PURE__*/styled.h3.withConfig({\n  displayName: \"params__DescriptionTitle\",\n  componentId: \"sc-1omqhb4-20\"\n})([\"margin:10px 0;\"]);\nconst DonationBox = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"params__DonationBox\",\n  componentId: \"sc-1omqhb4-21\"\n})([\"position:sticky;top:70px;padding:50px 20px 30px 20px;border-radius:15px;box-shadow:\", \";background:\", \";\", \"{all:unset;background:white;width:85%;padding:30px 15px 30px 15px;border-radius:15px;border:1px solid lightgray;position:fixed;bottom:30px;left:50%;transform:translate(-50%,0);}\"], props => props.theme.boxShadow2, props => props.theme.bgColor, media.tablet);\nconst CampaignName = /*#__PURE__*/styled.h2.withConfig({\n  displayName: \"params__CampaignName\",\n  componentId: \"sc-1omqhb4-22\"\n})([\"text-align:center;margin-bottom:30px;\", \"{display:none;}\"], media.tablet);\nconst CampaignDesc = /*#__PURE__*/styled.p.withConfig({\n  displayName: \"params__CampaignDesc\",\n  componentId: \"sc-1omqhb4-23\"\n})([\"margin-bottom:30px;height:150px;\", \"{display:none;height:70px;}\"], media.tablet);\nconst DonationForm = /*#__PURE__*/styled.form.withConfig({\n  displayName: \"params__DonationForm\",\n  componentId: \"sc-1omqhb4-24\"\n})([\"position:relative;label{position:absolute;top:2px;right:5px;}\", \"{label{top:6px;font-size:24px;}}\", \"{label{top:4px;font-size:24px;}}\"], media.tablet, media.mobile);\nconst DonationInput = /*#__PURE__*/styled.input.attrs({\n  required: true\n}).withConfig({\n  displayName: \"params__DonationInput\",\n  componentId: \"sc-1omqhb4-25\"\n})([\"all:unset;border-bottom:1px solid lightgray;width:100%;box-sizing:border-box;margin-bottom:10px;padding:0 40px 5px 0;text-align:right;\", \"{font-size:30px;padding:0 70px 5px 0;}\", \"{font-size:21px;}\"], media.tablet, media.mobile);\nconst DonationButton = /*#__PURE__*/styled.button.withConfig({\n  displayName: \"params__DonationButton\",\n  componentId: \"sc-1omqhb4-26\"\n})([\"width:100%;padding:10px 0;border:0;border-radius:15px;text-align:center;background:\", \";color:white;transition:all 0.3s ease-in-out;&:hover{background:\", \";}\", \"{padding:25px 0;font-size:30px;}\", \"{padding:18px 0;font-size:24px;}\"], props => props.theme.gray.gray5, props => props.theme.gray.gray3, media.tablet, media.mobile);\nconst DEFAULT_DATA = new Array();\nexport default function Detail({\n  params\n}) {\n  const {\n    0: data,\n    1: setData\n  } = useState(DEFAULT_DATA);\n  const [title, id] = params || [];\n  const {\n    0: donateAmount,\n    1: setDonateAmount\n  } = useState();\n  const [qrValue, setQrValue] = useRecoilState(qrValueState);\n  const [showModal, setShowModal] = useRecoilState(showConnectWalletModalState);\n  const [myAddress, setMyAddress] = useRecoilState(myAddressState);\n\n  const changeState = () => {\n    axios.patch(`http://ec2-52-78-57-218.ap-northeast-2.compute.amazonaws.com:3000/campaigns/campaign/fundingstatus/${id}`, {\n      fundingStatus: !data.fundingSatus\n    }).then(() => axios.patch(`http://ec2-52-78-57-218.ap-northeast-2.compute.amazonaws.com:3000/campaigns/campaign/refundstatus/${id}`, {\n      refundStatus: !data.refundStatus\n    }).then(res => {\n      alert(`상태가 변경되었습니다`);\n      location.reload();\n    }).catch(e => console.log(e)));\n  };\n\n  const donate = e => {\n    e.preventDefault();\n    donateTocampaign(id, Number(donateAmount), setQrValue, result => {\n      alert(result);\n      setShowModal(false);\n    });\n    setShowModal(true);\n  };\n\n  const onClickRefund = () => {\n    refund(id, myAddress, setQrValue, () => {\n      alert(\"success\");\n      setShowModal(false);\n    });\n    setShowModal(true);\n  };\n\n  useEffect(() => {\n    axios(`http://ec2-52-78-57-218.ap-northeast-2.compute.amazonaws.com:3000/campaigns/campaign/${id}`).then(res => setData(res.data)).catch(e => console.log(e));\n  }, []);\n  console.log(data);\n  return /*#__PURE__*/_jsxs(Wrapper, {\n    children: [/*#__PURE__*/_jsx(이미지, {\n      children: \"hello\"\n    }), /*#__PURE__*/_jsxs(Container, {\n      children: [/*#__PURE__*/_jsx(Seo, {\n        title: title\n      }), /*#__PURE__*/_jsxs(타이틀, {\n        children: [/*#__PURE__*/_jsx(Category, {\n          type: data.category ? data.category : \"일반\"\n        }), /*#__PURE__*/_jsx(캠페인이름, {\n          children: title\n        })]\n      }), /*#__PURE__*/_jsxs(Bars, {\n        children: [/*#__PURE__*/_jsx(PercentBar, {}), /*#__PURE__*/_jsx(CurrentBar, {\n          width: `${data.currentAmount / data.targetAmount * 100}%`\n        }), /*#__PURE__*/_jsxs(Percent, {\n          children: [data.currentAmount / data.targetAmount * 100, \"%\"]\n        }), /*#__PURE__*/_jsxs(Klay, {\n          children: [\"(\", /*#__PURE__*/_jsx(\"span\", {\n            children: data.currentAmount\n          }), \"Klay /\", \" \", /*#__PURE__*/_jsx(\"span\", {\n            children: data.targetAmount\n          }), \"Klay)\"]\n        }), /*#__PURE__*/_jsxs(Min, {\n          children: [\"\\uAE30\\uBD80 \\uB2E8\\uC704 \\uD074\\uB808\\uC774 : \", data.minFundingAmount, \" Klay\"]\n        })]\n      }), /*#__PURE__*/_jsxs(RefundState, {\n        children: [\"\\uD604\\uC7AC\\uC0C1\\uD0DC:\", data.refundStatus ? \"refund\" : \"funding\"]\n      }), /*#__PURE__*/_jsx(RefundButton, {\n        onClick: changeState,\n        children: \"change status\"\n      }), /*#__PURE__*/_jsxs(CampaignBox, {\n        children: [/*#__PURE__*/_jsxs(CampaignRow, {\n          children: [/*#__PURE__*/_jsxs(ParticipantBox, {\n            children: [/*#__PURE__*/_jsx(ParticipantRow, {\n              children: /*#__PURE__*/_jsx(ParticipantTitle, {\n                children: \"participant\"\n              })\n            }), /*#__PURE__*/_jsxs(ParticipantRow, {\n              children: [/*#__PURE__*/_jsx(Participant, {}), /*#__PURE__*/_jsx(Participant, {}), /*#__PURE__*/_jsx(Participant, {}), /*#__PURE__*/_jsx(Participant, {})]\n            })]\n          }), /*#__PURE__*/_jsxs(DescriptionBox, {\n            children: [/*#__PURE__*/_jsx(DescriptionTitle, {\n              children: \"Description\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              children: data.description\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(CampaignRow, {\n          style: {\n            padding: \"50px 0\"\n          },\n          children: /*#__PURE__*/_jsxs(DonationBox, {\n            children: [/*#__PURE__*/_jsx(CampaignName, {\n              children: title\n            }), /*#__PURE__*/_jsx(CampaignDesc, {\n              children: data.description\n            }), /*#__PURE__*/_jsxs(DonationForm, {\n              onSubmit: e => donate(e),\n              children: [/*#__PURE__*/_jsx(DonationInput, {\n                type: \"number\",\n                name: \"klay\",\n                id: \"klay\",\n                autoComplete: \"off\",\n                required: true,\n                min: \"0\",\n                step: data.minFundingAmount,\n                value: donateAmount,\n                onChange: e => setDonateAmount(e.target.value)\n              }), /*#__PURE__*/_jsx(\"label\", {\n                id: \"klay_label\",\n                htmlFor: \"klay\",\n                children: \"Klay\"\n              }), data.fundingStatus ? /*#__PURE__*/_jsx(DonationButton, {\n                type: \"submit\",\n                id: \"donate_btn\",\n                children: \"Donate\"\n              }) : /*#__PURE__*/_jsx(RefundButton, {\n                onClick: onClickRefund,\n                children: \"Refund\"\n              })]\n            })]\n          })\n        })]\n      })]\n    }), qrValue !== \"DEFAULT\" && /*#__PURE__*/_jsx(ConnectWalletModal, {})]\n  });\n}\nexport const getServerSideProps = async ({\n  params: {\n    params\n  }\n}) => {\n  return {\n    props: {\n      params\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"module"}