{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/kimdawoon/jogakbo-nextjs/jogakbo-nextjs/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kimdawoon/jogakbo-nextjs/jogakbo-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/kimdawoon/jogakbo-nextjs/jogakbo-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { JogakboContract } from \"api/UseCaver\"; // import {JogakboContract, rs} from \"api/UseCaver\";\n\nimport * as KlipAPI from \"../../api/UseKlip\";\nimport axios from \"axios\";\nimport Caver, { ABI } from \"caver-js\";\nimport { JOGAKBO_CONTRACT_ADDRESS } from \"constants/constants.baobab\";\nimport { useEffect, useState } from \"react\";\nimport { useRecoilState } from \"recoil\";\nimport styled from \"styled-components\";\nimport { myAddressState, qrValueState, showConnectWalletModalState, VerifyModalState } from \"../../../atom\";\nimport JOGAKBOABI from \"../../abi/JogakboABI.json\";\nimport ConnectWalletModal from \"components/modals/ConnectWalletModal\";\nimport { postCampaign } from \"api/campaigns\";\nvar Container = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"VerifyCampaignModal__Container\",\n  componentId: \"sc-1k04x16-0\"\n})([\"position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:9999;\"]);\nvar Modal = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"VerifyCampaignModal__Modal\",\n  componentId: \"sc-1k04x16-1\"\n})([\"display:flex;flex-direction:column;justify-content:space-between;padding:30px;width:80%;height:75%;background:#fff;div{font-size:24px;margin-bottom:15px;}\"]);\nvar ModalHeader = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"VerifyCampaignModal__ModalHeader\",\n  componentId: \"sc-1k04x16-2\"\n})([\"display:flex;align-items:center;svg{font-size:36px;}\"]);\nvar Name = /*#__PURE__*/styled.h5.withConfig({\n  displayName: \"VerifyCampaignModal__Name\",\n  componentId: \"sc-1k04x16-3\"\n})([\"width:100%;font-size:34px;text-align:center;\"]);\nvar Contents = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"VerifyCampaignModal__Contents\",\n  componentId: \"sc-1k04x16-4\"\n})([\"display:flex;flex-direction:column;height:100%;\"]);\nvar Buttons = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"VerifyCampaignModal__Buttons\",\n  componentId: \"sc-1k04x16-5\"\n})([\"display:flex;justify-content:center;div{margin:0 10px;}\"]);\nvar DeleteButton = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"VerifyCampaignModal__DeleteButton\",\n  componentId: \"sc-1k04x16-6\"\n})([\"padding:10px 15px;background:red;border-radius:5px;color:white;cursor:pointer;\"]);\nvar OnChainButton = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"VerifyCampaignModal__OnChainButton\",\n  componentId: \"sc-1k04x16-7\"\n})([\"padding:10px 15px;background:blue;border-radius:5px;color:white;cursor:pointer;\"]); // interface IDate {\n//   id: number;\n//   name: string;\n//   description: string;\n//   campaignId: number;\n//   currentAmount?: number;\n//   targetAmount: number;\n//   fundingState: boolean;\n//   refundState: boolean;\n//   category: string;\n//   creatorAddress: string;\n//   minFundingAmount: string;\n// }\n// interface Klaytn {\n//   on: (eventName: string, callback: () => void) => void;\n//   enable: () => Promise<Array<string>>;\n//   selectedAddress: string;\n//   networkVersion: number;\n//   publicConfigStore: Store;\n// }\n// interface State {\n//   isEnabled: boolean;\n//   isUnlocked: boolean;\n//   networkVersion: number;\n//   onboardingcomplete: boolean;\n// }\n// interface Store {\n//   subscribe: (callback: () => void) => void;\n//   getState: () => State;\n// }\n// declare global {\n//   interface Window {\n//     klaytn: any;\n//   }\n// }\n// const VerifyCampaignModal = (props: {id: number; name: string}) => {\n\nvar VerifyCampaignModal = function VerifyCampaignModal(props) {\n  var _useRecoilState = useRecoilState(VerifyModalState),\n      _useRecoilState2 = _slicedToArray(_useRecoilState, 2),\n      showModal = _useRecoilState2[0],\n      setShowModal = _useRecoilState2[1];\n\n  var _useRecoilState3 = useRecoilState(showConnectWalletModalState),\n      _useRecoilState4 = _slicedToArray(_useRecoilState3, 2),\n      showConnectWalletModal = _useRecoilState4[0],\n      setShowConnectWalletModal = _useRecoilState4[1]; // const [data, setData] = useState<IDate>();\n\n\n  var _useState = useState(),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useRecoilState5 = useRecoilState(myAddressState),\n      _useRecoilState6 = _slicedToArray(_useRecoilState5, 2),\n      myAddress = _useRecoilState6[0],\n      setMyAddress = _useRecoilState6[1];\n\n  var _useRecoilState7 = useRecoilState(qrValueState),\n      _useRecoilState8 = _slicedToArray(_useRecoilState7, 2),\n      qrValue = _useRecoilState8[0],\n      setQrValue = _useRecoilState8[1];\n\n  useEffect(function () {\n    axios(\"http://ec2-52-78-57-218.ap-northeast-2.compute.amazonaws.com:3000/pre-campaigns/campaign/\".concat(props.id)).then(function (res) {\n      return setData(res.data);\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n    console.log(myAddress);\n  }, []);\n\n  var deleteData = function deleteData() {\n    axios[\"delete\"](\"http://ec2-52-78-57-218.ap-northeast-2.compute.amazonaws.com:3000/pre-campaigns/campaign/delete/\".concat(props.id)).then(function (res) {\n      return console.log(res);\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n    setShowModal(false);\n    location.reload();\n  };\n\n  var create = function create() {\n    KlipAPI.createCampaign(data.creatorAddress, data.targetAmount, props.id, setQrValue, function (result) {\n      alert(JSON.stringify(result));\n      setShowConnectWalletModal(false);\n    });\n    setShowConnectWalletModal(true);\n    postCampaign(props.name, data.description, data.targetAmount, data.category, data.minFundingAmount, data.creatorAddress);\n  }; // const create = async () => {\n  //   console.log(window.klaytn);\n  //   let kly;\n  //   if (typeof window !== \"undefined\") {\n  //     kly = window.klaytn;\n  //   }\n  //   const caver = new Caver(kly);\n  //   console.log(caver);\n  //   const JogakboContract = new caver.klay.Contract(\n  //     JOGAKBOABI,\n  //     JOGAKBO_CONTRACT_ADDRESS,\n  //   );\n  //   console.log(JogakboContract);\n  //   const tx = {\n  //     type: \"SMART_CONTRACT_EXECUTION\",\n  //     from: kly.selectedAddress,\n  //     to: JOGAKBO_CONTRACT_ADDRESS,\n  //     data: JogakboContract.methods.createCampaign(\n  //       data?.creatorAddress,\n  //       data?.targetAmount,\n  //       data?.campaignId,\n  //     ),\n  //     // .encodeABI(),\n  //     gas: \"8000000\",\n  //     value: \"0\",\n  //   };\n  //   await caver.klay.sendTransaction(tx).then(res => console.log(res));\n  //   // await caver.klay\n  //   //   .sendTransaction({\n  //   //     type: \"VALUE_TRANSFER\",\n  //   //     from: \"0xA52c3f53F087B3445190ADc0B038Bd78D8110eDa\",\n  //   //     to: \"0xc72af0d3c40d5E95e3424b251ceA0cD81e230Dc1\",\n  //   //     gas: \"300000\",\n  //   //     value: caver.utils.toPeb(\"1\", \"KLAY\"),\n  //   //   })\n  //   //   .then(res => console.log(res));\n  // };\n\n\n  var onChangeImage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var formData, i;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!e.target.files) {\n                _context.next = 9;\n                break;\n              }\n\n              formData = new FormData();\n\n              for (i = 0; i < e.target.files.length; i++) {\n                formData.append(\"images\", e.target.files[i]);\n              }\n\n              formData.append(\"CampaignId\", props.id);\n              formData.append(\"CampaignDescription\", data === null || data === void 0 ? void 0 : data.description);\n              formData.append(\"CampaignName\", data === null || data === void 0 ? void 0 : data.name);\n              _context.next = 9;\n              return axios({\n                method: \"post\",\n                url: \"http://ec2-52-78-57-218.ap-northeast-2.compute.amazonaws.com:3000/image\",\n                data: formData,\n                headers: {\n                  \"Content-Type\": \"multipart/form-data\"\n                }\n              }).then(function (res) {\n                return console.log(\"성공\");\n              })[\"catch\"](function (e) {\n                return console.error(e);\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onChangeImage(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Container, {\n      onClick: function onClick() {\n        return setShowModal(false);\n      },\n      children: [/*#__PURE__*/_jsxs(Modal, {\n        onClick: function onClick(e) {\n          e.stopPropagation();\n        },\n        children: [/*#__PURE__*/_jsxs(ModalHeader, {\n          children: [/*#__PURE__*/_jsx(Name, {\n            children: props.name\n          }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n            onClick: function onClick() {\n              return setShowModal(false);\n            },\n            icon: faTimes\n          })]\n        }), /*#__PURE__*/_jsxs(Contents, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            children: [\"id: \", props.id]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [\"\\uC81C\\uCD9C\\uC790 \\uC8FC\\uC18C: \", data === null || data === void 0 ? void 0 : data.creatorAddress]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [\"\\uCE74\\uD14C\\uACE0\\uB9AC: \", data === null || data === void 0 ? void 0 : data.category]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [\"target amount: \", data === null || data === void 0 ? void 0 : data.targetAmount, \" Klay\"]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [\"target amount: \", data === null || data === void 0 ? void 0 : data.minFundingAmount, \" Klay\"]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: \"description\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: data === null || data === void 0 ? void 0 : data.description\n          })]\n        }), /*#__PURE__*/_jsxs(Buttons, {\n          children: [/*#__PURE__*/_jsx(DeleteButton, {\n            onClick: deleteData,\n            children: \"\\uC0AD\\uC81C\\uD558\\uAE30\"\n          }), /*#__PURE__*/_jsx(OnChainButton, {\n            onClick: create,\n            children: \"\\uC628\\uCCB4\\uC778 \\uC62C\\uB9AC\\uAE30\"\n          })]\n        }), /*#__PURE__*/_jsx(\"h3\", {\n          children: \"\\u2B07\\uFE0F NFT \\uC774\\uBBF8\\uC9C0 \\uC5C5\\uB85C\\uB4DC\\uD558\\uAE30\"\n        }), /*#__PURE__*/_jsx(\"form\", {\n          children: /*#__PURE__*/_jsx(\"input\", {\n            type: \"file\",\n            multiple: true,\n            onChange: function onChange(e) {\n              return onChangeImage(e);\n            }\n          })\n        })]\n      }), showConnectWalletModal && /*#__PURE__*/_jsx(ConnectWalletModal, {})]\n    })\n  });\n};\n\nexport default VerifyCampaignModal;","map":null,"metadata":{},"sourceType":"module"}